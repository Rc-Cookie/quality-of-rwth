<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <style>
        .hidden-course:hover {
            text-decoration: line-through;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <form>
        <table>
            <tr><td colspan="2"><h2>Login</h2></td></tr>

            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="moodleStartAutoForward" checked></td>
                <td>Auto-forward to SSO from the moodle start page</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="rwthOnlineLoginAutoForward" checked></td>
                <td>Auto-forward to SSO from the RWTHOnline start page</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="moodleStartAutoForward" checked></td>
                <td>Auto-forward to SSO from the PSP start page</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autoLoginOnCoursePreview" checked></td>
                <td>Auto-forward to login page from a "You need to be logged in to view this course" page</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="ssoAutoSubmit" checked></td>
                <td>Automatically submit the login credentials on SSO when they get filled in by the browser</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autoMailLoginSubmit" checked></td>
                <td>Automatically submit the login credentials on mail.rwth-aachen.de when they get filled in by the browser</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="videoAGAutoLoginForward" checked></td>
                <td>Automatically open the VideoAG login page when login is required</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autoGitLoginForward" checked></td>
                <td>Automatically open the GitLab login page when login is required</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autoSelectInstitution" checked></td>
                <td>Automatically select 'RWTH' as the insitution when promped for authentification</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="rememberMe" checked></td>
                <td>Use "Remember Me" login options when available during automatic login</td>
            </tr>

            <tr><td colspan="2"><h3>Multi-Factor-Authentication (MFA)</h3></td></tr>

            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autoSelectMFAOption" checked></td>
                <td>Automatically select the last choosen MFA token method</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autoMFASubmit" checked></td>
                <td>
                    Automatically submit the MFA token credentials on SSO when they get filled in by the browser.
                    The extension will only submit the input if it looks like a one-time password, that is, if it's 6 or 8 digits.
                </td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autofillManagedMFA" checked></td>
                <td>
                    Enable the built-in MFA token generator, which automatically generates and fills in the MFA code.
                    To use it, select to generate or add a token to be managed by the extension on the SSO login page.
                </td>
            </tr>

            <tr><td colspan="2"><h4>Tokens managed by the extension:</h4></td></tr>
            <tr>
                <td colspan="2">
                    <table>
                        <tbody>
                            <tr class="managed-token">
                                <td>"<span class="token-name"></span>"</td>
                                <td class="token-id" style="font-family: 'Courier New', Courier, monospace;"></td>
                                <td><button title="Deletes the token from the extension. The token itself won't be deleted, it just won't be autofilled anymore">Delete</button></td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr id="no-tokens"><td>
                                <i>None. You can add existing or generate new tokens from the SSO login page.</i>
                            </td></tr>
                        </tfoot>
                    </table>
                </td>
            </tr>

            <tr><td colspan="2"><h3>App Authorization</h3></td></tr>

            <tr>
                <td><select class="settings-dropdown" name="autoAuthorize">
                    <option value="never" title="Behaves like the regular page - if select 'Remember', it will remember until the permissions change">Never</option>
                    <option value="confirmOnce" title="Once you confirm once and select 'Remember', the app will always be authorized, even if the permissions change later" selected>After confirmed once</option>
                    <option value="always" title="Always immediately authorize, even if you never authorzed manually or selected 'Don't remember'">Always immediately</option>
                </select></td>
                <td>When to automatically confirm apps to access your information</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autoAuthorize" checked></td>
                <td>Automatically authorize apps you already authorized before</td>
            </tr>

            <tr><td colspan="2"><h2>Moodle</h2></td></tr>

            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="removeChatPopup" checked></td>
                <td>Remove the "chat" popup on Moodle</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="acceptCookies" checked></td>
                <td>Automatically accept non-deniable cookies</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="skipPDFAnnotator" checked></td>
                <td>Open PDFs directly instead of using Moodle's PDF annotator</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="clickURLResources" checked></td>
                <td>Automatically open "Click this link to open resource" links</td>
            </tr>
            <tr>                                                                                                                   <!-- Chrome: -->
                <td><input class="settings-checkbox" type="checkbox" name="cacheMoodlePages" checked></td>                         <!-- Chrome: -->
                <td>Re-enable caching of Moodle pages so that the page does not get reloaded when you click the "back" button</td> <!-- Chrome: -->
            </tr>                                                                                                                  <!-- Chrome: -->

            <tr><td colspan="2"><h2>Popup / Course search</h2></td></tr>

            <tr>
                <td><input class="settings-value" name="maxCourses" type="number" step="1" min="1" max="50" value="10"></td>
                <td>Maximum number of courses to show in dropdown. Higher numbers may significantly increase load time</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="openInNewTab"></td>
                <td>Always open a new tab when selecting a course from the dropdown menu</td>
            </tr>
            <tr>
                <td><select class="settings-dropdown" name="courseOrder">
                    <option value="time" title="Show the course first that was last visited">By access time</option>
                    <option value="name" title="Sort the courses alphabetically">By name</option>
                </select></td>
                <td>Sorting order for courses in the toolbar dropdown menu</td>
            </tr>
            <tr><td><br></td></tr>
            <tr>
                <td><h3>Hidden courses</h3></td>
                <td>
                    <div>These courses will be hidden from the dropdown menu, unless you explicitly search for them:</div>
                    <ul id="hidden-courses">
                        <li class="hidden-course">My course 1</li>
                        <li class="hidden-course">My course 2</li>
                    </ul>
                    <div id="no-hidden-courses" class="no-hidden-courses">
                        (None. Click the 'X' next to a course in the dropdown to hide it)
                    </div>
                </td>
            </tr>

            <tr><td colspan="2"><h2>Miscellaneous</h2></td></tr>

            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="autoDarkMode" checked></td>
                <td>Always select dark mode / light mode when available</td>
            </tr>
            <tr>
                <td><input class="settings-checkbox" type="checkbox" name="lightMode"></td>
                <td>Always select light mode (really?)</td>
            </tr>

            <tr><td colspan="2"><h2>Ignored websites</h2></td></tr>

            <tr>
                <!-- <td><h3>Ignored websites</h3></td> -->
                <td colspan="2">
                    <div>
                        You can specify websites where the extension will not run (at best effort), if you are having trouble with a page when the extension is enabled.
                        Specify a domain and optionally a route, e.g. <code>test.rwth-aachen.de/my/site</code>.
                        This would disable the extension on <code>sub.test.rwth-aachen.de/my/site</code> and also on <code>test.rwth-aachen.de/my/site/detail</code>, but
                        not on <code>moodle.rwth-aachen.de/my/site</code>.
                    </div>
                    <ul id="ignored-sites">
                        <!-- <li class="ignored-site">
                            <input title="domain, optionally with route" style="width: 100%" placeholder="Enter a domain" value="moodle.rwth-aachen.de">
                        </li> -->
                        <li class="ignored-site">
                            <input title="domain, optionally with route" style="width: 100%" placeholder="Enter a domain">
                        </li>
                    </ul>
                </td>
            </tr>
        </table>
    </form>
    <script src='options.js'></script>
</body>
</html>
